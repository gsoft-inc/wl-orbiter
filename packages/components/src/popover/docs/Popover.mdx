import { ArgTypes, Meta, Canvas } from "@storybook/addon-docs";
import { ComponentInfo, Tagline } from "@stories/components";
import { InnerContent } from "@components/placeholders/index.ts";
import { InnerHeading } from "@components/typography/index.ts";
import { InnerPopover, InnerPopoverTrigger } from "@components/popover/index.ts";

import * as PopoverStories from "./Popover.stories.tsx";

<Meta of={PopoverStories} />

# Popover

<Tagline>A Popover can be used to display some content on top of another.</Tagline>

<ComponentInfo
    usage={"import { PopoverTrigger, Popover, Heading, Content, Footer, usePopoverTriggerContext } from \"@workleap/orbiter-ui\";"}
    githubPath="/packages/components/src/popover/src"
/>

## Guidelines

### Content

- Minimally have a heading and some content.

### Popover vs Tooltip

- A popover is not meant to be used as a [tooltip](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tooltip_role) element. If you need a component that behaves like one use Orbiter's [tooltip](?path=/docs/tooltip--default-story) component instead.

## Usage

A popover trigger accepts exactly two children: the element that triggers the opening of the popover and the popover content. A trigger can be any component that accepts a `ref` and any other props passed from popover.

### Default

A default popover must have a heading and content.

<Canvas of={PopoverStories.Default} />

### Buttons

A popover can have a single [button](?path=/docs/button--default-story):

<Canvas of={PopoverStories.ButtonStory} />

Or a [group of button](?path=/docs/button--default-story#button-group):

<Canvas of={PopoverStories.ButtonGroupStory} />

### Footer

A popover can have footer text.

<Canvas of={PopoverStories.FooterStory} />

### Position

A popover can open at different positions.

<Canvas of={PopoverStories.Position} />

### Popover context

A popover `isOpen` state or `close` function can be retrieved from `usePopoverTriggerContext`.

<Canvas of={PopoverStories.Context} />

### Dismissable

By default, a popover will dismiss *on outside interactions* and `esc` keydown. However, in some cases, you might want to force the user to explicitly dismiss the popover with a targeted call to action. This is what the `dismissable` prop is for.

You can set the `dismissable` prop to `false` and render a call to action which will manually dismiss the popover by calling a `close` function retrieved from the `usePopoverTriggerContext` hook.

Inlining the call to `usePopoverTriggerContext` in `PopoverTrigger` will not work.

<Canvas of={PopoverStories.CustomClose} />

### Disabled trigger

A popover will not open when its trigger is disabled.

<Canvas of={PopoverStories.DisabledTrigger} />

### Controlled

A popover `open` state can be handled in controlled mode.

<Canvas of={PopoverStories.Controlled} />

## API

### PopoverTrigger

<ComponentInfo
    usage={"import { PopoverTrigger } from \"@workleap/orbiter-ui\";"}
    inherits={[InnerPopoverTrigger.defaultElement, "styled-component"]}
    compact
/>

<ArgTypes of={InnerPopoverTrigger} sort="alpha" />

### Popover

<ComponentInfo
    usage={"import { Popover } from \"@workleap/orbiter-ui\";"}
    slots={["heading", "content", "button", "button-group", "footer"]}
    inherits={[InnerPopover.defaultElement, "styled-component"]}
    compact
/>

<ArgTypes of={InnerPopover} sort="alpha" />

### Heading

<ComponentInfo
    usage={"import { Heading } from \"@workleap/orbiter-ui\";"}
    inherits={[InnerHeading.defaultElement, "styled-component"]}
    compact
/>

<ArgTypes of={InnerHeading} sort="alpha" />

### Content

<ComponentInfo
    usage={"import { Content } from \"@workleap/orbiter-ui\";"}
    inherits={[InnerContent.defaultElement, "styled-component"]}
    compact
/>

<ArgTypes of={InnerContent} sort="alpha" />

